#!/usr/bin/env bash

# rsync -arLv --exclude={${0#*/},".*"} . ~/.config/
# find * ! -type d ! -name "${0##*/}" ! -name ".*" -exec ln -sfv $(pwd)/{} ~/.config/{} \;

for rc_dir in *; do
  [ "$rc_dir" == "${0##*/}" ] && continue
  [ -h "$HOME/.config/$rc_dir" ]  && unlink "$HOME/.config/$rc_dir"
  [ -d "$HOME/.config/$rc_dir" ]  && rm -rf "$HOME/.config/$rc_dir"
  ln -sfv "$(pwd)/$rc_dir" "$HOME/.config/$rc_dir"
done

# ----------------------------------------------------------------------------

dot_links=(
  shell/*
  # x11/*
  vim
)

for dot_link in "${dot_links[@]}"; do
  [ -h "$HOME/.${dot_link##*/}" ] && unlink "$HOME/.${dot_link##*/}"
  [ -d "$HOME/.$rc_dir" ] && rm -rf "$HOME/.$rc_dir"
  ln -sfv "$HOME/.config/$dot_link" "$HOME/.${dot_link##*/}"
done

# ----------------------------------------------------------------------------

# reset
